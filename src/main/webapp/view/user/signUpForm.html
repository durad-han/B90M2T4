<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="google-signin-scope" content="profile email">
<meta name="google-signin-client_id" content="151296050428-7up6bf2212jt0j9n3qeqm01b6r01q6ed.apps.googleusercontent.com">
<link rel="import" href="../include/baseInclude.html">
<link rel="stylesheet" href="../../css/main/main.css">

<script src="../../js/comm/w3data.js"></script>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<script src="https://apis.google.com/js/api:client.js"></script>

<script src="../../js/main/main.js"></script>
<style type="text/css">
    #customBtn {
      display: inline-block;
      background: white;
      color: #444;
      white-space: nowrap;
    }
    #customBtn:hover {
      cursor: pointer;
    }
</style>
</head>

<body>
	<div w3-include-html="../include/header.html"></div>

	<div id="content" class="product">
		<div class="proList">
			<div class="option">
				<div class="wrapper">
					<input type="hidden" name="msg" id="msg" value="${msg}" />
					<form class="form-signin">
						<input type="hidden" name="loginType" value="me" />
						<h2 class="form-signin-heading">AROUND</h2>
						<hr>
						<p class="text-center">회원가입</p>
						<hr>
						<!-- <input type="text" class="form-control" id="id" name="id" placeholder="아이디 입력" required="아이디를 입력하세요." autofocus="" />
				    <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호 입력" required=""/> -->
						<p class="text-center">SNS 계정으로 간편하게 회원가입하세요.</p>
						<a id="custom-login-btn" href="javascript:loginWithKakao()"> 
							<img src="../../img/main/kakao.png" />
						</a>
						
   						<div id="customBtn" class="customGPlusSignIn">
     							<img style="width:82px; height:83px"src="../../img/main/google.png">
   						</div>
   						
  						<div id="name"></div>
  
						<p class="text-center">가입하면 AROUND의 약관 및 개인</p>
						<p class="text-center">정보처리방침에 동의하게 됩니다.</p>
						<br> <br>
						<hr>
						<p class="text-center">
							계정이 있으신가요? <a href="../login/loginForm.html">로그인</a>
						</p>
						<!-- <button class="btn btn-lg btn-primary btn-block" id="btnLogin">로그인</button> -->
						<br>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div w3-include-html="../include/footer.html"></div>

	<script>
		w3IncludeHTML();

		Kakao.init('a2df2dc9167541f9eb937ed24a7e8133');

		function loginWithKakao() {
			// 로그인 창을 띄웁니다.
			Kakao.Auth.login({
				success : function(authObj) {
					
					Kakao.Auth.setAccessToken(authObj.access_token);
					
					Kakao.API.request({
						url : '/v1/user/me',
						success : function(res) {
							alert(JSON.stringify(res))
							
							swal({
						    	title: "이메일 입력!",
						    	text: "사용자 계정을 입력해주세요:",
						    	type: "input",
						    	showCancelButton: true,
						    	closeOnConfirm: false,
						    	animation: "slide-from-top",
						    	inputPlaceholder: "사용자계정"
							},
						  	function(inputValue){
						    	if (inputValue === false) return false;
						  
						    	if (inputValue === "") {
						      		swal.showInputError("You need to write email!");
						      		return false
						    	}
						    	
						    	signUp(inputValue);
						    	
						    	
							});
							
							
						},
						fail : function(error) {
							alert(JSON.stringify(error));
						}
					});
				},
				fail : function(err) {
					alert(JSON.stringify(err));
				}
			});
		};


		function signUp(id) {
			alert(id)
			$.ajax({
				url : "../../login/signUp.do",
				data : {
					userId : id
				},
				dataType : "json"
			}).done(function(msg) {

				if (msg == "LOGIN") {
		    		swal("Info!", id + " 계정으로 이미 가입되었습니다.");
					return false;
				}
		  
		    	swal("Nice!", id + " 계정으로 회원가입 되었습니다.");
				
			});
		}
		
		startApp();
		
	</script>
</body>
</html>